# Application Configuration
NODE_ENV=development
PORT=3000
APP_NAME=NestJS Multitenant Advanced
APP_VERSION=1.0.0
APP_URL=http://localhost:3000

# Database Configuration - Central
CENTRAL_DB_TYPE=postgres
CENTRAL_DB_HOST=localhost
CENTRAL_DB_PORT=5432
CENTRAL_DB_USERNAME=postgres
CENTRAL_DB_PASSWORD=password
CENTRAL_DB_DATABASE=multitenant_central
CENTRAL_DB_SSL=false
CENTRAL_DB_MAX_CONNECTIONS=20
CENTRAL_DB_MIN_CONNECTIONS=5
CENTRAL_DB_ACQUIRE_TIMEOUT=30000
CENTRAL_DB_IDLE_TIMEOUT=10000

# Database Configuration - Tenant Template
TENANT_DB_TYPE=postgres
TENANT_DB_SSL=false
TENANT_DB_MAX_CONNECTIONS=10
TENANT_DB_MIN_CONNECTIONS=2
TENANT_DB_ACQUIRE_TIMEOUT=30000
TENANT_DB_IDLE_TIMEOUT=10000

# Connection Pool Settings
MAX_TENANT_CONNECTIONS=50
MIN_TENANT_CONNECTIONS=5
TENANT_ACQUIRE_TIMEOUT=30000
TENANT_IDLE_TIMEOUT=300000
TENANT_REAP_INTERVAL=1000
TENANT_CREATE_TIMEOUT=30000
TENANT_DESTROY_TIMEOUT=5000
TENANT_CREATE_RETRY_INTERVAL=200
TENANT_PROPAGATE_CREATE_ERROR=false

# Database Monitoring
DB_MONITORING_ENABLED=true
DB_SLOW_QUERY_THRESHOLD=5000
DB_CONNECTION_TIMEOUT_THRESHOLD=1000
DB_ENABLE_QUERY_LOGGING=false
DB_ENABLE_CONNECTION_LOGGING=false

# Database Backup
DB_BACKUP_ENABLED=false
DB_BACKUP_SCHEDULE=0 2 * * *
DB_BACKUP_RETENTION_DAYS=30
DB_BACKUP_COMPRESSION=true
DB_BACKUP_ENCRYPTION=false
DB_BACKUP_STORAGE_TYPE=local
DB_BACKUP_STORAGE_PATH=./backups

# Read Replicas
DB_READ_REPLICAS_ENABLED=false
DB_READ_REPLICA_HOSTS=
DB_READ_REPLICA_LOAD_BALANCING=round-robin
DB_READ_REPLICA_MAX_RETRIES=3
DB_READ_REPLICA_RETRY_DELAY=1000

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_USERNAME=
REDIS_DB=0
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_RETRY_DELAY_FAILOVER=100
REDIS_MAX_RETRIES_PER_REQUEST=3
REDIS_LAZY_CONNECT=true
REDIS_KEEP_ALIVE=30000

# Redis TLS
REDIS_TLS_ENABLED=false
REDIS_TLS_REJECT_UNAUTHORIZED=true
REDIS_TLS_CERT=
REDIS_TLS_KEY=
REDIS_TLS_CA=

# Redis Cache
REDIS_CACHE_DB=1
REDIS_CACHE_TTL=300
REDIS_CACHE_MAX_ITEMS=1000
REDIS_CACHE_KEY_PREFIX=cache:
REDIS_TENANT_CACHE_TTL=600
REDIS_CONNECTION_CACHE_TTL=1800
REDIS_SESSION_CACHE_TTL=3600
REDIS_USER_CACHE_TTL=900

# Redis Session
REDIS_SESSION_DB=2
REDIS_SESSION_TTL=86400
REDIS_SESSION_KEY_PREFIX=sess:
REDIS_SESSION_ROLLING=true
REDIS_SESSION_RESAVE=false
REDIS_SESSION_SAVE_UNINITIALIZED=false

# Redis Queue
REDIS_QUEUE_DB=3
REDIS_QUEUE_KEY_PREFIX=bull:
REDIS_QUEUE_REMOVE_ON_COMPLETE=100
REDIS_QUEUE_REMOVE_ON_FAIL=50
REDIS_QUEUE_ATTEMPTS=3
REDIS_QUEUE_BACKOFF_TYPE=exponential
REDIS_QUEUE_BACKOFF_DELAY=2000
REDIS_QUEUE_DELAY=0
REDIS_QUEUE_STALLED_INTERVAL=30000
REDIS_QUEUE_MAX_STALLED_COUNT=1
REDIS_QUEUE_RETRY_PROCESS_DELAY=5000

# Redis Rate Limiting
REDIS_RATE_LIMIT_DB=4
REDIS_RATE_LIMIT_KEY_PREFIX=rl:
REDIS_RATE_LIMIT_SHORT_DURATION=60000
REDIS_RATE_LIMIT_SHORT_LIMIT=100
REDIS_RATE_LIMIT_MEDIUM_DURATION=600000
REDIS_RATE_LIMIT_MEDIUM_LIMIT=500
REDIS_RATE_LIMIT_LONG_DURATION=3600000
REDIS_RATE_LIMIT_LONG_LIMIT=2000

# Redis Pub/Sub
REDIS_PUBSUB_DB=5
REDIS_PUBSUB_KEY_PREFIX=pubsub:

# Redis Cluster
REDIS_CLUSTER_ENABLED=false
REDIS_CLUSTER_NODES=
REDIS_CLUSTER_READY_CHECK=true
REDIS_CLUSTER_MAX_RETRIES=3
REDIS_CLUSTER_RETRY_DELAY=100

# Redis Sentinel
REDIS_SENTINEL_ENABLED=false
REDIS_SENTINEL_HOSTS=
REDIS_SENTINEL_MASTER_NAME=mymaster
REDIS_SENTINEL_PASSWORD=
REDIS_SENTINEL_AUTH_PASSWORD=

# Redis Monitoring
REDIS_MONITORING_ENABLED=true
REDIS_HEALTH_CHECK_INTERVAL=30000
REDIS_SLOW_LOG_THRESHOLD=10000
REDIS_MEMORY_USAGE_THRESHOLD=80
REDIS_CONNECTION_POOL_THRESHOLD=90

# Redis Persistence
REDIS_RDB_ENABLED=true
REDIS_AOF_ENABLED=false
REDIS_BACKUP_SCHEDULE=0 3 * * *
REDIS_BACKUP_RETENTION_DAYS=7

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=1h
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-in-production
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=nestjs-multitenant
JWT_AUDIENCE=nestjs-multitenant-users
JWT_ALGORITHM=HS256
JWT_CLOCK_TOLERANCE=60
JWT_IGNORE_EXPIRATION=false
JWT_IGNORE_NOT_BEFORE=false
JWT_ENABLE_TOKEN_ROTATION=true
JWT_ROTATION_THRESHOLD=300

# Password Security
PASSWORD_SALT_ROUNDS=12
PASSWORD_MIN_LENGTH=8
PASSWORD_MAX_LENGTH=128
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL_CHARS=true
PASSWORD_HISTORY_COUNT=5
PASSWORD_EXPIRATION_DAYS=90
PASSWORD_WARNING_DAYS=7
PASSWORD_MAX_FAILED_ATTEMPTS=5
PASSWORD_LOCKOUT_DURATION=900000
PASSWORD_LOCKOUT_INCREMENT=true

# Session Security
SESSION_SECRET=your-super-secret-session-key-change-in-production
SESSION_NAME=nestjs.multitenant.sid
SESSION_RESAVE=false
SESSION_SAVE_UNINITIALIZED=false
SESSION_ROLLING=true
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTP_ONLY=true
SESSION_COOKIE_MAX_AGE=86400000
SESSION_COOKIE_SAME_SITE=strict
SESSION_COOKIE_DOMAIN=
SESSION_COOKIE_PATH=/
SESSION_TOUCH_AFTER=3600
SESSION_TTL=86400
SESSION_DISABLE_TOUCH=false

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGIN=*
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Accept,Authorization,X-Tenant-ID,X-API-Key
CORS_EXPOSED_HEADERS=X-Total-Count,X-Page-Count,X-Current-Page
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400
CORS_PREFLIGHT_CONTINUE=false
CORS_OPTIONS_SUCCESS_STATUS=204

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=1000
RATE_LIMIT_MESSAGE=Too many requests from this IP
RATE_LIMIT_STANDARD_HEADERS=true
RATE_LIMIT_LEGACY_HEADERS=false

# Authentication Rate Limiting
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX=5
AUTH_RATE_LIMIT_MESSAGE=Too many authentication attempts
AUTH_RATE_LIMIT_SKIP_SUCCESSFUL=true
AUTH_RATE_LIMIT_SKIP_FAILED=false

# API Rate Limiting
API_RATE_LIMIT_WINDOW_MS=60000
API_RATE_LIMIT_MAX=100
API_RATE_LIMIT_MESSAGE=API rate limit exceeded

# Helmet Security Headers
HELMET_ENABLED=true
CSP_ENABLED=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=false
NO_SNIFF_ENABLED=true
FRAMEGUARD_ENABLED=true
FRAMEGUARD_ACTION=deny
XSS_FILTER_ENABLED=true
REFERRER_POLICY_ENABLED=true
REFERRER_POLICY=same-origin

# API Security
API_KEY_ENABLED=false
API_KEY_HEADER=X-API-Key
API_KEY_QUERY=apiKey
API_KEY_LENGTH=32
API_KEY_PREFIX=ak_

# Request Validation
MAX_BODY_SIZE=10mb
MAX_PARAM_LENGTH=100
MAX_QUERY_LENGTH=1000
MAX_HEADER_SIZE=8192

# Request Sanitization
SANITIZATION_ENABLED=true
SANITIZE_REMOVE_NULL_BYTES=true
SANITIZE_REMOVE_CONTROL_CHARS=true
SANITIZE_NORMALIZE_UNICODE=true

# Encryption
ENCRYPTION_ALGORITHM=aes-256-gcm
ENCRYPTION_KEY=your-32-character-encryption-key-here
ENCRYPTION_IV_LENGTH=16
ENCRYPTION_TAG_LENGTH=16
FIELD_ENCRYPTION_ENABLED=false
SENSITIVE_FIELDS=ssn,creditCard,bankAccount,passport

# Audit and Compliance
AUDIT_ENABLED=true
AUDIT_LOG_LEVEL=info
AUDIT_AUTH_EVENTS=true
AUDIT_AUTHZ_EVENTS=true
AUDIT_DATA_ACCESS_EVENTS=true
AUDIT_DATA_MODIFICATION_EVENTS=true
AUDIT_ADMIN_ACTIONS=true
AUDIT_SYSTEM_EVENTS=true
AUDIT_RETENTION_DAYS=2555
AUDIT_ARCHIVE_AFTER_DAYS=365
AUDIT_COMPRESSION_ENABLED=true

# GDPR Compliance
GDPR_ENABLED=false
GDPR_DATA_RETENTION_DAYS=2555
GDPR_RIGHT_TO_BE_FORGOTTEN=true
GDPR_DATA_PORTABILITY=true
GDPR_CONSENT_TRACKING=true

# HIPAA Compliance
HIPAA_ENABLED=false
HIPAA_ENCRYPTION_REQUIRED=true
HIPAA_AUDIT_TRAIL_REQUIRED=true
HIPAA_ACCESS_CONTROL_REQUIRED=true

# SOC2 Compliance
SOC2_ENABLED=false
SOC2_SECURITY_MONITORING=true
SOC2_AVAILABILITY_MONITORING=true
SOC2_PROCESSING_INTEGRITY=true
SOC2_CONFIDENTIALITY=true
SOC2_PRIVACY=true

# Monitoring and Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_TIMESTAMP=true
LOG_COLORIZE=false
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs/app.log
LOG_FILE_MAX_SIZE=10m
LOG_FILE_MAX_FILES=5

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# Metrics
METRICS_ENABLED=true
METRICS_ENDPOINT=/metrics
METRICS_PREFIX=nestjs_multitenant
METRICS_DEFAULT_LABELS=app=nestjs-multitenant

# Swagger Documentation
SWAGGER_ENABLED=true
SWAGGER_PATH=api
SWAGGER_TITLE=NestJS Multitenant API
SWAGGER_DESCRIPTION=Advanced NestJS Multitenant Application API
SWAGGER_VERSION=1.0.0
SWAGGER_CONTACT_NAME=API Support
SWAGGER_CONTACT_EMAIL=support@example.com
SWAGGER_LICENSE_NAME=MIT
SWAGGER_LICENSE_URL=https://opensource.org/licenses/MIT

# Email Configuration
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_SECURE=false
MAIL_USER=your-email@gmail.com
MAIL_PASS=your-app-password
MAIL_FROM=noreply@example.com
MAIL_FROM_NAME=NestJS Multitenant

# SMS Configuration
SMS_PROVIDER=twilio
SMS_ACCOUNT_SID=your-twilio-account-sid
SMS_AUTH_TOKEN=your-twilio-auth-token
SMS_FROM_NUMBER=+1234567890

# Push Notifications
PUSH_PROVIDER=firebase
PUSH_SERVER_KEY=your-firebase-server-key
PUSH_PROJECT_ID=your-firebase-project-id

# File Storage
STORAGE_TYPE=local
STORAGE_LOCAL_PATH=./uploads
STORAGE_AWS_REGION=us-east-1
STORAGE_AWS_BUCKET=your-s3-bucket
STORAGE_AWS_ACCESS_KEY_ID=your-aws-access-key
STORAGE_AWS_SECRET_ACCESS_KEY=your-aws-secret-key

# Queue Configuration
QUEUE_REDIS_HOST=localhost
QUEUE_REDIS_PORT=6379
QUEUE_REDIS_PASSWORD=
QUEUE_REDIS_DB=3

# Caching
CACHE_TTL=300
CACHE_MAX=1000
CACHE_STORE=redis

# Feature Flags
FEATURE_FLAGS_ENABLED=true
FEATURE_ADVANCED_ANALYTICS=false
FEATURE_REAL_TIME_NOTIFICATIONS=true
FEATURE_BULK_OPERATIONS=true
FEATURE_EXPORT_DATA=true
FEATURE_CUSTOM_THEMES=false